<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>账号注册</title>

    <link rel="stylesheet" href="./css/iconfont.css">
    <link rel="stylesheet" href="./css/index.css">

    <script src="./js/vue.js"></script>
    <script src="./js/axios.min.js"></script>
    <script src="element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">
</head>

<body>

    <div class="login-box" id="login-vue">
        <h1>注册</h1>
        <div class="input-box">
            <div class="input-text">
                <span class='iconfont icon-mine'></span>
                <input type="text" placeholder="账号" v-model="accountInfo.account">
            </div>
            <div class="input-text">
                <span class='iconfont icon-lock'></span>
                <input type="password" placeholder="密码" v-model="accountInfo.password">
            </div>
            <div class="input-btn" @click="register()">
                注册
            </div>
            <div class="sign-up">
                已经注册？ <a href="./login.html">切换登录</a>
            </div>
        </div>
    </div>


</body>
<!--vue内容-->
<script>
    new Vue({
        el: "#login-vue",
        data: {
            accountInfo: {
                account: '',
                password: ''
            }
        },
        methods: {
            //注册
            register() {
                axios({
                    url: 'http://127.0.0.1:8080/system/FamilyAccounts/register',
                    params: {
                        account: this.accountInfo.account,
                        password: this.accountInfo.password
                    }
                }).then((res) => {
                    console.log(res);
                    if (res.data.flag == true) {
                        this.$message.success("注册成功");
                        // //保存token
                        sessionStorage.setItem("cwgl_token", res.data.data);
                        document.location.href = './main.html'
                    } else {
                        this.$message.error("注册失败");
                    }
                })
            },
        },
        mounted() {

        }

    })
</script>


</html>